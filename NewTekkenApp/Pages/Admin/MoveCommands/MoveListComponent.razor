@inject IModalService ModalService

@if (moveList != null && ShowForm)
{
    <div>
        <select @bind="moveCode" id="SelectMoveList" class="form-control">
            @foreach (var move in moveList)
            {
                <option value=@move.Code>@move.Description</option>
            }
        </select>
    </div>

    <div class="modal-footer">
        <button @onclick="Submit" class="btn btn-primary">Submit</button>
        <button @onclick="Cancel" class="btn btn-secondary">Cancel</button>
    </div>
}
else
{
    @*<div class="alert alert-success" role="alert">
        Thanks @FirstName @LastName, form (Id: @FormId) submitted successfully.<br />
        <button class="btn btn-primary" @onclick="Done">Done</button>
        </div>*@
}

@code {
    [Inject] protected IMoveService MoveService { get; set; } = default!;

    [Parameter] public int Character_code { get; set; } = default!;
    [CascadingParameter] BlazoredModalInstance ModalInstance { get; set; } = default!;

    public IList<Move> moveList { get; set; }

    bool ShowForm { get; set; } = true;
    public int moveCode { get; set; }

    protected override async Task OnInitializedAsync()
    {
        moveList = await MoveService.GetEntitiesByCharacterCode(Character_code);
    }

    void Submit()
    {
        ShowForm = false;
        ModalInstance.CloseAsync(ModalResult.Ok<int>(moveCode));
    }

    void Cancel()
    {
        ModalInstance.CancelAsync();
    }

}

