@inject IModalService ModalService

@if (moveTextList != null && ShowForm)
{
    <div>
        <select @bind="moveTextCode" id="SelectMoveTextList" class="form-control">
            @foreach (var moveText in moveTextList)
            {
                <option value=@moveText.Code>@moveText.Description</option>
            }
        </select>
    </div>

    <div class="modal-footer">
        <button @onclick="Submit" class="btn btn-primary">Submit</button>
        <button @onclick="Cancel" class="btn btn-secondary">Cancel</button>
    </div>
}
else
{
    @*<div class="alert alert-success" role="alert">
        Thanks @FirstName @LastName, form (Id: @FormId) submitted successfully.<br />
        <button class="btn btn-primary" @onclick="Done">Done</button>
        </div>*@
}

@code {
    [CascadingParameter] BlazoredModalInstance ModalInstance { get; set; } = default!;
    [Parameter] public int Character_code { get; set; } = default!;
    [Inject] protected IMoveTextService MoveTextService { get; set; } = default!;

    public IList<MoveText> moveTextList { get; set; }

    bool ShowForm { get; set; } = true;
    public int moveTextCode { get; set; }

    protected override async Task OnInitializedAsync()
    {
        moveTextList = await MoveTextService.GetEntitiesByCharacterCode(Character_code);
    }

    void Submit()
    {
        ShowForm = false;
        ModalInstance.CloseAsync(ModalResult.Ok<int>(moveTextCode));
    }

    void Cancel()
    {
        ModalInstance.CancelAsync();
    }
}

